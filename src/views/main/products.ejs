<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Products Store</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
</head>
<body> 
    <header>
        <%- include('../partials/navbar') %>
    </header>
    <div class="container">
        <h2 class="text-center m-4">PRODUCTOS</h2>
        <div class="row">
            <% for (var i = 0; i < products.length; i++) { %>
                <div class="col-md-4 col-sm-6">
                    <div>
                        <img class="img-thumbnail" src="<%= products[i].cover %>">
                        <div class="caption text-center">
                            <h5><%= products[i].name %></h5>
                            <p><%= products[i].category %></p>
                            <p>$<%= products[i].price %></p>
                        </div>
                    </div>
                </div>
            <% } %>
        </div>
            <% if (pages > 0) { %>
                <nav aria-label="" class="mt-4 mb-4">
                    <ul class="pagination pagination-sm justify-content-center">
                        <% if (current == 1) { %>
                            <li class="page-item disabled">
                                <a class="page-link" href="#" tabindex="-1">Previous</a>
                            </li>
                        <% } else { %>
                            <li class="page-item">
                                <a class="page-link" href="/products/<%= parseInt(current) - 1 %>" tabindex="-1">Previous</a>
                            </li>
                        <% } %>
                
                        <% for (let i = 1; i <= pages; i++) { %>
                            <% if (i == current) { %>
                                <li class="page-item active">
                                    <a class="page-link" href="#"><%= i %> <span class="sr-only">(current)</span></a>
                                </li>
                            <% } else { %>
                                <li class="page-item">
                                    <a class="page-link" href="/products/<%= i %>"><%= i %></a>
                                </li>
                            <% } %>
                        <% } %>
                
                        <% if (current >= pages) { %>
                            <li class="page-item disabled">
                                <a class="page-link" href="#">Next</a>
                            </li>
                        <% } else { %>
                            <li class="page-item">
                                <a class="page-link" href="/products/<%= parseInt(current) + 1 %>">Next</a>
                            </li>
                        <% } %>
                    </ul>
                </nav>
            <% } %>
        </div>
        <%- include('../partials/scripts') %>
    </body>
    </html>
                